<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Happy Birthday Benjarong üéâ</title>
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;700;900&family=Pacifico&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg-1: #061221; --bg-2:#0b1b2b; --glass: rgba(255,255,255,0.04);
      --accent-a: #ff6b6b; --accent-b: #7c3aed; --accent-c:#06b6d4;
      --card: rgba(255,255,255,0.03); --muted: rgba(230,238,246,0.75);
    }
    *{box-sizing:border-box}
    html,body{height:100%; margin:0}
    body{font-family:'Kanit', system-ui, -apple-system, 'Segoe UI', Roboto, 'Noto Sans', Arial; background: radial-gradient(800px 400px at 10% 10%, rgba(124,58,237,0.06), transparent 8%), linear-gradient(180deg,var(--bg-1),var(--bg-2)); color:#e6eef6; display:flex; align-items:center; justify-content:center; padding:20px; overflow:hidden}

    .stage{width:min(1100px,96%); position:relative}
    .card{display:grid; grid-template-columns:360px 1fr; gap:24px; padding:28px; border-radius:20px; background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); box-shadow: 0 20px 60px rgba(2,6,23,0.7); border:1px solid rgba(255,255,255,0.03); position:relative; overflow:hidden}

    /* decorative glows */
    .glow{position:absolute; border-radius:50%; filter:blur(80px); opacity:0.12}
    .g1{width:420px;height:420px; background:linear-gradient(135deg,var(--accent-b),transparent); left:-120px; top:-160px}
    .g2{width:260px;height:260px; background:linear-gradient(135deg,var(--accent-c),transparent); right:-80px; bottom:-120px}

    /* left column */
    .left{background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005)); padding:18px; border-radius:14px}
    .portrait{width:100%; height:320px; border-radius:12px; overflow:hidden; display:flex; align-items:center; justify-content:center; background:linear-gradient(135deg,var(--accent-b),var(--accent-c)); box-shadow: 0 8px 30px rgba(12,23,43,0.6)}
    .portrait img{width:100%; height:100%; object-fit:cover}
    .profileName{margin-top:14px; font-weight:800; font-size:20px}
    .subtitle{color:var(--muted); margin-top:6px; font-size:14px}
    .stats{display:flex; gap:10px; margin-top:14px}
    .stat{flex:1; background:var(--card); padding:12px; border-radius:10px; text-align:center}
    .stat .n{font-weight:800; font-size:20px; color:var(--accent-c)}
    .stat .t{font-size:12px; color:var(--muted)}

    /* right column */
    .right{padding:6px}
    .headline{font-family:'Pacifico', cursive; font-size:34px; font-weight:900; margin:0 0 6px; color:#ffb3d9; text-shadow:0 0 12px #ff69b4, 0 0 30px rgba(124,58,237,0.25)}
    .lead{color:var(--muted); margin-bottom:18px}
    .actions{display:flex; gap:12px; flex-wrap:wrap}
    .btn{padding:12px 18px; border-radius:12px; border:none; cursor:pointer; font-weight:800}
    .btn.primary{background:linear-gradient(90deg,var(--accent-b),var(--accent-c)); color:#fff; box-shadow:0 12px 30px rgba(92,33,255,0.12)}
    .btn.ghost{background:transparent; border:1px solid rgba(255,255,255,0.06); color:var(--muted)}
    .messageBox{margin-top:18px; background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.015)); padding:16px; border-radius:12px}
    .messageBox h3{margin:0 0 8px}

    .tags{display:flex; gap:8px; margin-top:14px}
    .tag{background:rgba(255,255,255,0.03); padding:8px 10px; border-radius:999px; font-weight:700; font-size:13px}

    .footer{margin-top:18px; color:rgba(255,255,255,0.6); font-size:13px}

    #canvas-fire{position:fixed; inset:0; z-index:9999; pointer-events:none}
    .floating-msg{position:fixed; left:50%; transform:translateX(-50%); top:10%; font-size:28px; color:#fff; text-shadow:0 0 12px #ffd1fc, 0 0 30px #9be7ff; pointer-events:none; opacity:0}

    @media (max-width:940px){ .card{grid-template-columns:1fr; padding:20px} .portrait{height:240px} }
  </style>
</head>
<body>
  <div class="stage">
    <div class="glow g1"></div>
    <div class="glow g2"></div>

    <div class="card" id="card">
      <canvas id="canvas-fire"></canvas>

      <div class="left">
        <div class="portrait">
          <img id="photo" src="CF0F0233-782D-493D-B741-06D636D8ED7F.jpg" alt="‡∏£‡∏π‡∏õ‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î">
        </div>
        <div class="profileName" id="displayName">‡πÄ‡∏ö‡∏ç‡∏à‡∏£‡∏á‡∏Ñ‡πå ‡πÅ‡∏™‡∏ô‡∏°‡∏¥‡πà‡∏á</div>
        <div class="subtitle">‡πÄ‡∏Å‡∏¥‡∏î 11 ‡∏™‡∏¥‡∏á‡∏´‡∏≤‡∏Ñ‡∏° 2548 (11/08/2548) ‚Ä¢ ‡∏™‡∏∏‡∏Ç‡∏™‡∏±‡∏ô‡∏ï‡πå‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î üéÇ</div>

        <div class="stats">
          <div class="stat">
            <div class="n" id="age">--</div>
            <div class="t">‡∏≠‡∏≤‡∏¢‡∏∏</div>
          </div>
          <div class="stat">
            <div class="n" id="nextDays">--</div>
            <div class="t">‡∏ñ‡∏∂‡∏á‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡∏≠‡∏µ‡∏Å</div>
          </div>
          <div class="stat">
            <div class="n" id="zodiac">--</div>
            <div class="t">‡∏£‡∏≤‡∏®‡∏µ</div>
          </div>
        </div>

      </div>

      <div class="right">
        <h1 class="headline" id="heroTitle">Happy Birthday ‡πÄ‡∏ö‡∏ç‡∏à‡∏£‡∏á‡∏Ñ‡πå üéâ</h1>
        <div class="lead">‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏±‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì ‡∏°‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏â‡∏•‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏Ç‡∏≠‡∏û‡∏£‡πÉ‡∏´‡πâ‡∏õ‡∏µ‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏µ‡∏ó‡∏µ‡πà‡πÄ‡∏ï‡πá‡∏°‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</div>

        <div class="actions">
          <button class="btn primary" id="openGift">‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç üéÅ</button>
          <button class="btn ghost" id="playMusic">‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏•‡∏á</button>
          <button class="btn ghost" id="downloadCard">‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏Å‡∏≤‡∏£‡πå‡∏î</button>
        </div>

        <div class="messageBox">
          <h3>‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏∂‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á</h3>
          <p id="messageText">‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡πÄ‡∏ö‡∏ç‡∏à‡∏£‡∏á‡∏Ñ‡πå üíå
‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡∏õ‡∏µ‡∏ô‡∏µ‡πâ‡πÄ‡∏à‡∏≠‡πÅ‡∏ï‡πà‡∏™‡∏¥‡πà‡∏á‡∏î‡∏µ ‡πÜ ‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÉ‡∏ô‡∏ó‡∏∏‡∏Å‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏à ‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏£‡∏á‡πÄ‡∏™‡∏°‡∏≠ ‚Äî ‡∏™‡∏π‡πâ ‡πÜ ‡∏ô‡∏∞!</p>
          <div class="tags">
            <div class="tag">‡πÄ‡∏Å‡∏¥‡∏î: 11 ‡∏™.‡∏Ñ. 2548</div>
            <div class="tag">‡∏ä‡∏∑‡πà‡∏≠: ‡πÄ‡∏ö‡∏ç‡∏à‡∏£‡∏á‡∏Ñ‡πå</div>
            <div class="tag">‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç: ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç</div>
          </div>
        </div>

        <div class="footer">‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡πÇ‡∏î‡∏¢‡∏£‡∏∞‡∏ö‡∏ö ‚Äî ‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£</div>
      </div>
    </div>
  </div>

  <!-- audio: place lokthatbaekwai.mp3 next to this html file -->
  <audio id="bgm" src="lokthibaekwai.mp3" preload="auto"></audio>
  <div class="floating-msg" id="floatingMsg">‡∏™‡∏∏‡∏Ç‡∏™‡∏±‡∏ô‡∏ï‡πå‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î! üéÇ</div>

  <script>
    // Birthday data (‡∏£‡∏±‡∏ö‡∏õ‡∏µ ‡∏û.‡∏®. ‡∏´‡∏≤‡∏Å‡πÉ‡∏™‡πà ‡∏û.‡∏®. ‡πÉ‡∏´‡πâ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô ‡∏Ñ.‡∏®.)
    const user = { day:11, month:8, yearBE:2548, name:'‡πÄ‡∏ö‡∏ç‡∏à‡∏£‡∏á‡∏Ñ‡πå ‡πÅ‡∏™‡∏ô‡∏°‡∏¥‡πà‡∏á' };
    function toCE(y){ return (y>2500)? y-543 : y; }
    const birth = { day:user.day, month:user.month, year: toCE(user.yearBE) };

    // DOM
    const ageEl = document.getElementById('age');
    const nextDaysEl = document.getElementById('nextDays');
    const zodiacEl = document.getElementById('zodiac');
    const heroTitle = document.getElementById('heroTitle');
    const photo = document.getElementById('photo');
    const bgm = document.getElementById('bgm');
    const floatingMsg = document.getElementById('floatingMsg');

    // age calc
    function calcAge(b){
      const today = new Date();
      const bd = new Date(b.year, b.month-1, b.day);
      let age = today.getFullYear() - bd.getFullYear();
      const m = today.getMonth() - bd.getMonth();
      if (m < 0 || (m===0 && today.getDate() < bd.getDate())) age--;
      return age;
    }
    function daysToNextBirthday(b){
      const today = new Date();
      let nb = new Date(today.getFullYear(), b.month-1, b.day);
      if (nb < today) nb = new Date(today.getFullYear()+1, b.month-1, b.day);
      const diff = nb - today;
      const days = Math.ceil(diff / (1000*60*60*24));
      return {days, date:nb};
    }
    function zodiac(day,month){
      const z = [ ['‡∏°‡∏±‡∏á‡∏Å‡∏£',20], ['‡∏Å‡∏∏‡∏°‡∏†‡πå',19], ['‡∏°‡∏µ‡∏ô',21], ['‡πÄ‡∏°‡∏©',20], ['‡∏û‡∏§‡∏©‡∏†',21], ['‡πÄ‡∏°‡∏ñ‡∏∏‡∏ô',21], ['‡∏Å‡∏£‡∏Å‡∏é',23], ['‡∏™‡∏¥‡∏á‡∏´‡πå',23], ['‡∏Å‡∏±‡∏ô‡∏¢‡πå',23], ['‡∏ï‡∏∏‡∏•',23], ['‡∏û‡∏¥‡∏à‡∏¥‡∏Å',22], ['‡∏ò‡∏ô‡∏π',22] ];
      const m = month;
      const cutoff = z[m-1][1];
      return (day < cutoff) ? z[(m+10)%12][0] : z[m-1][0];
    }

    // countdown + days alive
    function updateCounts(){
      // countdown to next birthday
      const now = new Date();
      let nb = new Date(now.getFullYear(), birth.month-1, birth.day);
      if (nb <= now) nb = new Date(now.getFullYear()+1, birth.month-1, birth.day);
      const diff = nb - now;
      const days = Math.floor(diff / (1000*60*60*24));
      const hours = Math.floor((diff/(1000*60*60))%24);
      const mins = Math.floor((diff/(1000*60))%60);
      const secs = Math.floor((diff/1000)%60);
      nextDaysEl.textContent = `${days} ‡∏ß‡∏±‡∏ô ${hours} ‡∏ä‡∏° ${mins} ‡∏ô‡∏≤‡∏ó‡∏µ ${secs} ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ`;

      // days alive
      const bd = new Date(birth.year, birth.month-1, birth.day);
      const diff2 = now - bd;
      const daysAlive = Math.floor(diff2 / (1000*60*60*24));
      // animate number
      animateNumber(daysAlive);
    }

    // simple number animator
    let lastAnimated = -1;
    function animateNumber(target){
      const elId = 'age'; // use age slot to show years for compatibility
      const ageVal = calcAge(birth);
      document.getElementById('age').textContent = ageVal + ' ‡∏õ‡∏µ';

      // show days alive in a visible place under message box
      const existing = document.getElementById('daysAlive');
      if(!existing){
        const div = document.createElement('div'); div.id='daysAlive'; div.style.marginTop='12px'; div.style.fontWeight='700'; div.style.color='#cfe9e0';
        div.textContent = '‡∏°‡∏µ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏≠‡∏¢‡∏π‡πà‡∏°‡∏≤: 0 ‡∏ß‡∏±‡∏ô';
        document.querySelector('.right').insertBefore(div, document.querySelector('.right').children[3]);
      }
      const el = document.getElementById('daysAlive');
      // avoid restarting animation too often
      if (lastAnimated === target) return; lastAnimated = target;
      let cur = 0; const step = Math.max(1, Math.floor(target/200));
      const t = setInterval(()=>{
        cur += step; if(cur >= target){ cur = target; clearInterval(t); }
        el.textContent = `‡∏°‡∏µ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏≠‡∏¢‡∏π‡πà‡∏°‡∏≤: ${cur.toLocaleString()} ‡∏ß‡∏±‡∏ô`;
      }, 12);
    }

    function refreshStats(){
      ageEl.textContent = calcAge(birth) + ' ‡∏õ‡∏µ';
      zodiacEl.textContent = zodiac(birth.day, birth.month);
      updateCounts();
      const today = new Date();
      if (today.getDate()===birth.day && (today.getMonth()+1)===birth.month){
        heroTitle.textContent = `Happy Birthday ${user.name} üéÇ`;
        setTimeout(()=>{ launchFireworks(); showFloatingMsg('‡∏™‡∏∏‡∏Ç‡∏™‡∏±‡∏ô‡∏ï‡πå‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î!'); },500);
      }
    }

    refreshStats(); setInterval(refreshStats,1000);

    // Fireworks canvas
    const canvas = document.getElementById('canvas-fire');
    const ctx = canvas.getContext('2d');
    function resizeCanvas(){ canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
    window.addEventListener('resize', resizeCanvas); resizeCanvas();

    class Particle{
      constructor(x,y,color){
        this.x = x; this.y = y; this.color = color; this.vx = (Math.random()-0.5)*8; this.vy = (Math.random()-2)*8; this.alpha = 1; this.size = 2+Math.random()*4; }
      update(){ this.x += this.vx; this.y += this.vy; this.vy += 0.08; this.vx *= 0.99; this.alpha -= 0.012; }
      draw(ctx){ ctx.save(); ctx.globalAlpha = Math.max(0,this.alpha); ctx.fillStyle = this.color; ctx.beginPath(); ctx.arc(this.x,this.y,this.size,0,Math.PI*2); ctx.fill(); ctx.restore(); }
    }
    let particles = [];
    function launchFireworks(){
      const cx = window.innerWidth/2; const cy = window.innerHeight/3;
      const bursts = 10 + Math.floor(Math.random()*8);
      for(let b=0;b<bursts;b++){
        const hue = Math.floor(Math.random()*360);
        const count = 30 + Math.floor(Math.random()*50);
        for(let i=0;i<count;i++){
          const angle = Math.random()*Math.PI*2;
          const speed = 2 + Math.random()*6;
          const x = cx + Math.cos(angle)*10; const y = cy + Math.sin(angle)*10;
          const p = new Particle(x,y, `hsl(${hue} 85% 60%)`);
          p.vx = Math.cos(angle)*speed; p.vy = Math.sin(angle)*speed - 3; p.size = 2 + Math.random()*5;
          particles.push(p);
        }
      }
      animateParticles(); createConfetti();
    }
    let animating = false;
    function animateParticles(){
      if (animating) return; animating = true;
      let frames = 0;
      function step(){
        frames++;
        ctx.clearRect(0,0,canvas.width,canvas.height);
        for(let i=particles.length-1;i>=0;i--){
          const p = particles[i]; p.update(); p.draw(ctx);
          if (p.alpha <= 0.02){ particles.splice(i,1); }
        }
        if (particles.length>0 && frames<1500){ requestAnimationFrame(step); } else { animating=false; ctx.clearRect(0,0,canvas.width,canvas.height); }
      }
      requestAnimationFrame(step);
    }

    // Confetti (DOM) - quick decorative
    function createConfetti(){
      const colors = ['#FF6B6B','#FFD93D','#7C3AED','#06B6D4','#60A5FA'];
      for(let i=0;i<60;i++){
        const el = document.createElement('div');
        el.className='confetti-piece';
        el.style.position='fixed'; el.style.zIndex=9999;
        el.style.left = Math.random()*100 + 'vw'; el.style.top = '-10vh';
        el.style.width = (6+Math.random()*10)+'px'; el.style.height = (8+Math.random()*12)+'px';
        el.style.background = colors[Math.floor(Math.random()*colors.length)];
        el.style.transform = `rotate(${Math.random()*360}deg)`;
        el.style.opacity = 0.95;
        el.style.borderRadius = '2px';
        el.style.transition = 'transform 3s linear, top 3s linear, opacity 3s linear';
        document.body.appendChild(el);
        setTimeout(()=>{ el.style.top = (100+Math.random()*20)+'vh'; el.style.transform = `rotate(${Math.random()*1080}deg) translateX(${(Math.random()-0.5)*200}px)`; el.style.opacity=0.9; },20);
        setTimeout(()=>el.remove(),3500);
      }
    }

    // floating message
    function showFloatingMsg(text){
      floatingMsg.textContent = text; floatingMsg.style.opacity = 1; floatingMsg.animate([{transform:'translateY(0)', opacity:1},{transform:'translateY(-60px)', opacity:0}], {duration:2200, easing:'ease-out'});
      setTimeout(()=>floatingMsg.style.opacity=0,2200);
    }

    // open gift button
    document.getElementById('openGift').addEventListener('click', ()=>{
      const card = document.getElementById('card');
      card.animate([{ transform:'scale(1)' },{ transform:'scale(1.02)' },{ transform:'scale(1)' }], { duration:600, easing:'ease-out' });
      launchFireworks(); showFloatingMsg('‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç!');
      document.getElementById('messageText').textContent = '‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î ‡∏Ñ‡∏∑‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥‡∏ó‡∏µ‡πà‡∏î‡∏µ ‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡∏õ‡∏µ‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏µ‡∏ó‡∏µ‡πà‡∏ß‡∏¥‡πÄ‡∏®‡∏©‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì ‚ú®';
      // try play music if not playing
      if(bgm && bgm.paused){ bgm.play().catch(()=>{}); }
    });

    // music controls
    let playing = false;
    document.getElementById('playMusic').addEventListener('click', ()=>{
      if (!bgm.src){
        alert('‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏û‡∏•‡∏á (‡∏ß‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå lokthibaekwai.mp3 ‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ)'); return;
      }
      if (!playing){ bgm.play().catch(()=>{}); playing=true; document.getElementById('playMusic').textContent='‡∏õ‡∏¥‡∏î‡πÄ‡∏û‡∏•‡∏á'; }
      else { bgm.pause(); playing=false; document.getElementById('playMusic').textContent='‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏•‡∏á'; }
    });

    // download card
    document.getElementById('downloadCard').addEventListener('click', ()=>{
      const card = document.getElementById('card');
      const rect = card.getBoundingClientRect();
      const out = document.createElement('canvas');
      const scale = 2; out.width = rect.width*scale; out.height = rect.height*scale;
      const outCtx = out.getContext('2d'); outCtx.scale(scale,scale);
      outCtx.fillStyle = '#061221'; outCtx.fillRect(0,0,rect.width,rect.height);
      const img = new Image(); img.src = document.getElementById('photo').src;
      img.onload = ()=>{
        outCtx.drawImage(img, 12,12, rect.width/2 - 24, rect.height - 24);
        outCtx.fillStyle = '#fff'; outCtx.font = '18px Kanit, sans-serif'; outCtx.fillText(`${user.name}`, rect.width/2 + 20, 50);
        outCtx.fillStyle = 'rgba(255,255,255,0.8)'; outCtx.font = '14px Kanit, sans-serif'; outCtx.fillText(`‡πÄ‡∏Å‡∏¥‡∏î: 11/08/2548`, rect.width/2 + 20, 80);
        const a = document.createElement('a'); a.href = out.toDataURL('image/png'); a.download = 'happy_birthday_card.png'; a.click();
      }
    });

    // auto-play music (try) and auto fireworks on load
    window.addEventListener('load', ()=>{
      // try to play mp3 (place lokthibaekwai.mp3 in same folder)
      if (bgm && bgm.src){ bgm.play().catch(()=>{ /* may be blocked by browser */ }); }
      // small delay then fireworks
      setTimeout(()=>{ launchFireworks(); showFloatingMsg('Welcome ‚Äî Happy Birthday!'); }, 800);
    });

    // init
    document.getElementById('displayName').textContent = user.name;
    refreshStats();
  </script>
</body>
</html>
